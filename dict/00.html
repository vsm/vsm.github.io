<!doctype html>
<html>
<head>
  <meta charset="utf-8">

  <style>
  body {
    font-family: BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
    font-size: 16px;
    line-height: 24px;
    margin-top: 60px;
  }
  .main {
    width: 560px;
    margin-left: auto;
    margin-right: auto;
  }
  #descr {
    margin: 0 0 15px 0;
  }
  #numPlain {
    margin: 0 4px;
  }
  #numPlain:empty {
    display: none;
  }
  .code {
    font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, monospace;
    font-size: 13.6px;
    color: #24292e;
    background: #f3f4f4;
    padding: 2.72px 5.44px;
    border-radius: 6px;
  }
  #numID {
    margin: 0 6px;
  }
  #err {
    display: block;
    text-align: center;
    font-size: 13px;
  }
  #err:empty {
    display: none;
  }

  #descr.noID {
    display: inline-block;
    margin: 0;
  }
  #descr.invalidID span {
    color: red;
    font-weight: normal;
  }
  </style>


  <script>
  window.onload = function() {
    var [$descr, $numID, $numPlain, $err]
      = ['descr', 'numID', 'numPlain', 'err']
      .map(s => document.getElementById(s));

    var url = new URL(window.location.href);
    var id  = (url.searchParams.get('id') || '') .replace(' ', '+');

    if (!id) {
      $descr.classList.add('noID');
      $descr.innerHTML = 'Root';
    }
    else {
      $numID.innerHTML = `https://w3id.org/00/${ id }`;

      var regExp_validID = /^(0|-?[1-9](\.\d*[1-9])?)e(\+0|[+-][1-9]\d*)$/;
      var validID = regExp_validID.test(id);
      if (validID) {
        var nr = +id;
        if (!Number.isNaN(nr)  &&  nr !== 0  &&  Math.abs(nr) !== Infinity  &&
            nr.toString() !== id ) {
          $numPlain.innerHTML = nr;  ///`‘${ nr }’`;
        }
      }
      else {
        $err.innerHTML =
          `(invalid ID: does not match ${ regExp_validID.toString() })`;
        $descr.classList.add('invalidID');
      }
    }
  }
  </script>
</head>


<body>
  <div class="main">
    <div id="descr">
      The number <span id="numPlain"></span>
      with ID <span id="numID" class="code"></span>
      <span id="err"></span>
    </div>
    of the <b>Controlled Vocabulary for Real Numbers</b>,<br>
    where numbers get a string ID based on scientific notation.<br>
    <br>
    See: github.com/perma-id/<a href="https://github.com/perma-id/w3id.org/tree/master/00">w3id.org/00</a>.
  </div>
</body>
</html>
